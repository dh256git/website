---
layout: default
---

<article class="post" itemscope itemtype="https://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="headline">{{ page.title }}</h1>

    {%- comment -%} AI assistance indicator mapping {%- endcomment -%}
    {%- assign ai_raw = page.AI_assistance | default: '' | downcase | strip -%}
    {%- assign ai_label = 'AI-free' -%}
    {%- assign ai_emoji = '‚úçÔ∏è' -%}
    {%- if ai_raw == 'ai-assisted' -%}
      {%- assign ai_label = 'AI-assisted' -%}
      {%- assign ai_emoji = 'ü§ù' -%}
    {%- elsif ai_raw == 'ai-generated' -%}
      {%- assign ai_label = 'AI-generated' -%}
      {%- assign ai_emoji = 'ü§ñ' -%}
    {%- endif -%}

    <p class="post-meta">
      <time datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
        {{ page.date | date: "%B %-d, %Y" }}
      </time>
      {%- if page.author %} - <span itemprop="author">{{ page.author }} </span>{% endif -%}
      - <span class="ai-indicator"><span aria-hidden="false">{{ ai_emoji }}</span> {{ ai_label }}</span>
    </p>

    {%- if page.hero -%}
    <figure class="post-hero">
<img src="{{ page.hero | relative_url }}"
     alt="{{ page.hero_alt | default: '' }}"
     loading="lazy" decoding="async"
     itemprop="image">
      {%- if page.hero_caption -%}<figcaption>Fig 1: {{ page.hero_caption }}</figcaption>{%- endif -%}
    </figure>
    {%- endif -%}
  </header>

  <div class="post-content" itemprop="articleBody">
    {{ content }}
  </div>

  {%- if page.related_publications -%}
  <div class="post-related-pubs">
    <h2>Related publications</h2>
    <ul class="pub-list">
      {%- for id in page.related_publications -%}
        {%- assign pub = site.publications | where: 'slug', id | first -%}
        {%- if pub -%}{% include pub-card.html p=pub show_links=true %}{%- endif -%}
      {%- endfor -%}
    </ul>
  </div>
  {%- endif -%}

  {%- comment -%} Build a validated list of external links (need both title and url) {%- endcomment -%}
  {%- assign valid_ext = "" | split: "" -%}
  {%- if page.related_external_posts -%}
    {%- for ext in page.related_external_posts -%}
      {%- assign title = ext.title | default: '' | strip -%}
      {%- assign url = ext.url | default: '' | strip -%}
      {%- if title != '' and url != '' -%}
        {%- assign valid_ext = valid_ext | push: ext -%}
      {%- endif -%}
    {%- endfor -%}
  {%- endif -%}

  {%- if valid_ext.size > 0 -%}
  <div class="post-related-external">
    <h2>Related external articles</h2>
    <ul class="list-unstyled">
      {%- for ext in valid_ext -%}
        <li>
          <a href="{{ ext.url }}" target="_blank" rel="noopener">
            {{ ext.title }} <span aria-hidden="true">‚Üó</span><span class="sr-only">(opens in a new tab)</span>
          </a>
        </li>
      {%- endfor -%}
    </ul>
  </div>
  {%- endif -%}

  {%- if page.tags and page.tags.size > 0 -%}
  <h2>Tags</h2>
  <div class="post-tags">
    {%- assign theme_slugs = site.themes | map: 'slug' -%}
    {%- for t in page.tags -%}
      {%- assign tslug = t | slugify -%}
      {%- if theme_slugs contains tslug -%}
        {%- assign th = site.themes | where: 'slug', tslug | first -%}
        <a class="tag-badge" href="{{ th.url | relative_url }}">{{ th.title }}</a>
      {%- else -%}
        <span class="tag-badge">{{ t }}</span>
      {%- endif -%}
      {%- unless forloop.last -%} {% endunless -%}
    {%- endfor -%}
  </div>
  {%- endif -%}
</article>
