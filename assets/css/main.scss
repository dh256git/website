---
---

:root {
  --bg: #ffffff;
  --fg: #111;
  --muted: #555;
  --link: #0b66c3;
  --accent: #0b66c3;
}

* { box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  margin: 0; font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color: var(--fg); background: var(--bg);
}
a { color: var(--link); }
.container { width: min(1100px, 92vw); margin: 2rem auto; }

.skip-link {
  position: absolute; left: -9999px; top: -9999px;
}
.skip-link:focus {
  left: 0; top: 0; background: #fff; border: 2px solid var(--accent); padding: .5rem 1rem; z-index: 1000;
}

/* Screen-reader only (robust) */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  clip-path: inset(50%) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* Header */
.site-header { border-bottom: 1px solid #eee; }
.header-top {
  display: grid; grid-template-columns: auto auto 1fr; gap: .75rem; align-items: center;
  padding: .75rem min(1100px, 4vw);
}

/* Header logos */
.logo img {
  height: clamp(40px, 6vw, 64px); /* was 36px */
  width: auto;
  display: block;
}

/* Optional: slightly smaller on very small screens */
@media (max-width: 520px) {
  .logo img { height: 40px; }
}

.site-title { font-weight: 700; font-size: 1.125rem; }

/* Nav */
.header-nav { border-top: 1px solid #eee; }
.header-nav ul {
  margin: 0; padding: 0 min(1100px, 4vw); list-style: none; display: flex; gap: 1rem; flex-wrap: wrap;
}
.header-nav a { display: block; padding: .75rem 0; text-decoration: none; }
.header-nav a[aria-current="page"] { font-weight: 700; }

/* Footer */
.site-footer { border-top: 1px solid #eee; padding: 1.5rem min(1100px, 4vw); color: var(--muted); }
.site-footer .social { list-style: none; display: flex; gap: 1rem; margin: .5rem 0 0; padding: 0; }

/* Cards & lists */
.grid { display: grid; gap: 1rem; }
.grid-2 { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
.list-unstyled { list-style: none; margin: 0; padding: 0; }

/* Accessibility */
:focus-visible { outline: 3px solid #f8b700; outline-offset: 2px; }
@media (prefers-reduced-motion: reduce) { * { animation: none !important; scroll-behavior: auto; } }

/* Publications */
.pub-list { list-style: none; padding: 0; margin: 0; display: grid; gap: .75rem; }
.pub-item { padding: .5rem 0; border-bottom: 1px solid #eee; }
.pub-item:last-child { border-bottom: 0; }
.pub-title { margin: 0 0 .125rem 0; font-size: 1rem; }
.pub-meta { margin: 0; color: var(--muted); }
.pub-links { margin: .25rem 0 0; font-size: .95rem; }

/* People (cards) */
.person-card {
  display: grid;
  grid-template-columns: 96px 1fr; /* image column + text */
  gap: 1rem;
  padding: 1rem 0;
  border-bottom: 1px solid #eee;
}
.person-card:last-child { border-bottom: 1px solid #eee; }

.person-photo {
  width: 96px;
  height: 96px;
}
.person-photo img {
  width: 100%;
  height: 100%;
  object-fit: cover;   /* crops large, unedited photos nicely */
  border-radius: 12px; /* soft corners, optional */
  display: block;      /* removes inline-image baseline gap */
}

/* Text rows */
.person-text { min-width: 0; } /* critical in CSS Grid to allow shrinking without overflow */
.person-text .row1 { margin: 0; font-weight: 600; }
.person-text .row1 a { text-decoration: none; }
.person-text .row1 a:hover,
.person-text .row1 a:focus { text-decoration: underline; }
.person-text .row2 { margin: .125rem 0 0; color: var(--muted); }

/* People grid: 2 columns on md/large, 1 on small */
.people-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(380px, 1fr));
  gap: 1.25rem 2rem; /* a bit more horizontal room to reduce wrapping */
}

/* Keep both rows on one line on md/large (no truncation), allow wrapping on small */
.person-text .row1,
.person-text .row2 { white-space: nowrap; }

@media (max-width: 900px) {
  .people-grid { grid-template-columns: 1fr; }
  .person-text .row1,
  .person-text .row2 { white-space: normal; }
}

@media (max-width: 520px) {
  .person-card { grid-template-columns: 72px 1fr; }
  .person-photo { width: 72px; height: 72px; }
  /* no need to size the img explicitly here; it already fills the container */
}

/* Media lists */
.media-list, .post-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 1.25rem; }
.media-item, .post-item { padding: 0 0 1.25rem; border-bottom: 1px solid #eee; }
.media-item:last-child, .post-item:last-child { border-bottom: 0; }
.media-title, .post-list .post-title { margin: 0 0 .25rem; font-size: 1.125rem; }
.media-summary, .post-excerpt { margin: .5rem 0 0; color: var(--fg); }
.post-meta { margin: 0; color: var(--muted); }

/* Responsive embeds */
.embed-16x9 { position: relative; width: 100%; aspect-ratio: 16 / 9; background: #000; }
.embed-16x9 iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; }

/* Audio */
.audio-player { margin: 1rem 0; }
.audio-player audio { width: 100%; display: block; }

/* Tag pill (if not already) */
.tag-badge { display: inline-block; padding: .125rem .5rem; border: 1px solid #e5e5e5; border-radius: 999px; font-size: .85rem; }

/* Post layout */
.post-header { margin-bottom: 1rem; }
.post .post-title {            /* overrides list size if needed */
  margin: 0 0 .25rem;
  font-size: 1.75rem;
  line-height: 1.2;
}
.post .post-meta { margin: 0; color: var(--muted); }

.post-hero { margin: 1rem 0; }
.post-hero img { width: 100%; height: auto; display: block; border-radius: 12px; }
.post-hero figcaption { color: var(--muted); font-size: .9rem; }

.post-content {
  margin-top: 1rem;
  /* Optional: slightly narrower measure for readability */
  /* max-width: 70ch; */
}
.post-content img { max-width: 100%; height: auto; }
.post-content figure { margin: 1rem 0; }
.post-content h2 { margin-top: 1.5rem; margin-bottom: .5rem; }
.post-content h3 { margin-top: 1.25rem; margin-bottom: .5rem; }
.post-content p, .post-content ul, .post-content ol, .post-content blockquote, .post-content pre {
  margin: .75rem 0;
}
.post-content blockquote {
  padding-left: 1rem;
  border-left: 3px solid #eee;
  color: var(--muted);
}

/* Code (Rouge/Kramdown defaults-friendly) */
.post-content code { background: #f6f8fa; padding: 0 .25em; border-radius: 4px; }
.post-content pre {
  background: #f6f8fa; padding: .75rem 1rem; overflow: auto; border-radius: 8px;
}
.post-content pre code { background: transparent; padding: 0; }

/* Tags & post nav */
.post-tags { margin-top: 1rem; }
.post-nav { margin-top: 2rem; display: flex; justify-content: space-between; gap: 1rem; }
.post-prev, .post-next { text-decoration: none; }
.post-prev:hover, .post-prev:focus, .post-next:hover, .post-next:focus { text-decoration: underline; }

/* For dense lists on media item landing pages */
.link-list li + li { margin-top: .25rem; }

/* Flow animation in the header (decorative) */
.header-top {
  position: relative;
  overflow: hidden; /* keep the effect clipped to the header row */
}

/* Animated flow lines layer */
.header-top::before {
  content: "";
  position: absolute;
  top: 0; right: 0; bottom: 0;
  /* Start the effect somewhere to the right of logos/title.
     Tweak the clamp() left edge if needed for your logo/title width. */
  left: clamp(340px, 42vw, 640px);
  pointer-events: none;
  z-index: 0;

  /* Two very light diagonal stripe fields using the accent color */
  background:
    repeating-linear-gradient(115deg,
      color-mix(in srgb, var(--accent) 12%, transparent) 0 6px,
      transparent 6px 18px),
    repeating-linear-gradient(65deg,
      color-mix(in srgb, var(--accent) 9%, transparent) 0 8px,
      transparent 8px 24px);

  background-size: 220% 100%, 160% 100%;
  background-position: 0% 50%, 0% 50%;
  animation: headerFlow 28s linear infinite;

  /* Soft left fade so nothing clashes with text/logo area */
  mask-image: linear-gradient(to left, rgba(0 0 0 / 0) 0%,
                                       rgba(0 0 0 / .2) 10%,
                                       rgba(0 0 0 / .85) 35%,
                                       rgba(0 0 0 / 1) 60%);
}

/* Optional: a gentle highlight sheen over the stripes to blend into white bg */
.header-top::after {
  content: "";
  position: absolute;
  top: 0; right: 0; bottom: 0;
  left: clamp(340px, 42vw, 640px);
  pointer-events: none;
  z-index: 1;
  background: linear-gradient(to left,
              rgba(255 255 255 / 1) 0%,
              rgba(255 255 255 / .85) 20%,
              rgba(255 255 255 / 0) 40%);
}

@keyframes headerFlow {
  from { background-position: 0% 50%, 0% 50%; }
  to   { background-position: 100% 50%, 100% 50%; }
}

/* Respect user preferences and small screens */
@media (prefers-reduced-motion: reduce) {
  .header-top::before { animation: none; background-position: 0% 50%, 0% 50%; }
}
@media (max-width: 640px) {
  .header-top::before, .header-top::after { display: none; } /* optional */
}

/* ===== NAV BAR (enhanced) ===== */

/* Light-tint variables (with fallbacks if color-mix isn't supported) */
:root {
  --nav-bg: #eef5fb;      /* fallback */
  --nav-border: #dae9f8;  /* fallback */
  --nav-hover: rgba(255,255,255,.65);
  --nav-current: #fff;
}

/* Prefer computed tints where supported */
@supports (background: color-mix(in srgb, white 90%, black)) {
  :root {
    --nav-bg: color-mix(in srgb, var(--accent) 8%, white);
    --nav-border: color-mix(in srgb, var(--accent) 18%, white);
  }
}

/* Remove the old hairline, add breathing room */
.header-nav {
  border-top: 0;
  padding: .5rem 0 1rem;
}

/* Make the bar itself a rounded rectangle that sits within page margins */
.header-nav ul {
  /* full-width within your content width */
  width: min(1100px, 92vw);
  margin: 0 auto;
  padding: .25rem;
  list-style: none;

  /* enclosure */
  background: var(--nav-bg);
  border: 1px solid var(--nav-border);
  border-radius: 12px; /* matches your card radius language */
  box-shadow: 0 1px 0 rgba(0,0,0,.03);

  /* equal distribution */
  display: flex;
  flex-wrap: nowrap;
  gap: 0;              /* let items butt up; we’ll pad links instead */
}

/* Each item takes equal space; center its link */
.header-nav li { flex: 1 1 0; }

/* Links fill their slot; centered label; comfy hit area */
.header-nav a {
  display: block;
  text-align: center;
  padding: .75rem .5rem;
  text-decoration: none;
  font-weight: 600;
  border-radius: 10px;           /* inner rounding for hover/current */
  color: var(--fg);
}

/* Current page pill */
.header-nav a[aria-current="page"] {
  background: var(--nav-current);
  box-shadow: inset 0 0 0 1px var(--nav-border);
}

/* Hover/focus feedback (kept subtle) */
.header-nav a:hover,
.header-nav a:focus-visible {
  background: var(--nav-hover);
  outline: none;
}

/* Small screens: horizontal scroll instead of squishing/wrapping */
@media (max-width: 720px) {
  .header-nav ul {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x proximity;
  }
  .header-nav li { flex: 0 0 auto; }
  .header-nav a { padding: .65rem .75rem; scroll-snap-align: center; }
}

/* ===== Link 'pills' for stacked lists ===== */

/* sensible fallbacks */
:root {
  --pill-bg: #f5f9fe;        /* very light accent tint */
  --pill-bg-hover: #eef5fb;
  --pill-border: #dae9f8;
}

/* prefer computed tints when supported */
@supports (background: color-mix(in srgb, white 90%, black)) {
  :root {
    --pill-bg: color-mix(in srgb, var(--accent) 6%, white);
    --pill-bg-hover: color-mix(in srgb, var(--accent) 11%, white);
    --pill-border: color-mix(in srgb, var(--accent) 22%, white);
  }
}

/* Apply to any <ul> you want pill styling on */
.pill-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: .5rem; /* vertical rhythm between pills */
}

/* Make the entire link feel like a 'pill' */
.pill-list > li > a {
  display: block;
  padding: .6rem .9rem;
  border: 1px solid var(--pill-border);
  border-radius: 999px;              /* pill shape */
  background: var(--pill-bg);
  color: inherit;
  text-decoration: none;
  line-height: 1.3;
  box-shadow: 0 1px 0 rgba(0,0,0,.03);
  transition: background .2s ease, box-shadow .2s ease, transform .03s ease;
}

/* Optional: if a list item has an icon/emoji before the text */
.pill-list > li > a { display: flex; align-items: center; gap: .5rem; }

/* Hover/focus states */
.pill-list > li > a:hover { background: var(--pill-bg-hover); }
.pill-list > li > a:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
  background: var(--pill-bg-hover);
}

/* Dense variant (use: class="pill-list pill-list--compact") */
.pill-list.pill-list--compact > li > a { padding: .5rem .75rem; }

/* Multi-line clamp for pill link titles */
.pill-text {
  flex: 1 1 auto;
  display: -webkit-box;         /* multi-line clamp */
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;        /* clamp to 2 lines */
  line-clamp: 2;                /* modern shorthand (safe to keep) */
  overflow: hidden;
  overflow-wrap: anywhere;      /* break long tokens if needed */
}

/* Optional: give pills consistent height even when only 1 line */
.pill-list > li > a {
  line-height: 1.3;
  /* 2 lines of text + vertical padding (adjust if you changed padding) */
  min-height: calc(1.3em * 2 + 1.2rem);
  align-items: center;          /* keeps single-line pills vertically centred */
}

/* Post hero: responsive, capped at ~75% of content width */
.post-hero {
  /* center the figure within your .container */
  margin: 1.25rem auto;
  width: min(75%, 860px);     /* 75% of container, but never wider than ~860px */
}

.post-hero img {
  display: block;
  width: 100%;
  height: auto;               /* ignore file’s intrinsic pixel size; scale to fit */
  border-radius: 12px;        /* matches your card radius */
  box-shadow: 0 2px 12px rgba(0,0,0,.05);
}

.post-hero figcaption {
  margin-top: .5rem;
  font-size: .9rem;
  color: var(--muted);
  text-align: center;
}

/* Small screens: let it use full content width */
@media (max-width: 720px) {
  .post-hero { width: 100%; }
}

/* Optional modifiers if you ever want different looks */
.post-hero--full { width: 100%; }             /* full content width */
.post-hero--bleed {                            /* edge-to-edge (careful) */
  width: 100vw;
  margin-left: calc(50% - 50vw);
}

/* ===== Section heading outline (gradient) ===== */

/* Fallback tints if color-mix isn't supported */
:root {
  --sec-grad-start: #eef5fb;   /* very light accent tint */
  --sec-grad-end:   #0b66c3;   /* accent */
}

/* Prefer computed tints */
@supports (background: color-mix(in srgb, white 90%, black)) {
  :root {
    --sec-grad-start: color-mix(in srgb, var(--accent) 10%, white);
    --sec-grad-end:   var(--accent);
  }
}

/* Reusable class for any section heading */
.sec-h {
  display: inline-block;           /* box hugs the text */
  margin: 2rem 0 .75rem;
  padding: .25rem .6rem;
  border: 2px solid transparent;   /* required for border-image */
  border-radius: 0;                /* right angles */
  /* Gradient outline left→right */
  border-image: linear-gradient(90deg, var(--sec-grad-start), var(--sec-grad-end)) 1;
  /* Optional faint fill so it pops just a touch; remove if you want only the outline */
  background: color-mix(in srgb, var(--accent) 3%, white);
  box-shadow: 0 1px 0 rgba(0,0,0,.03);
}

/* Size variants if needed */
.sec-h--sm { padding: .2rem .5rem; border-width: 1.5px; }
.sec-h--lg { padding: .35rem .75rem; border-width: 2px; }

/* Tighten spacing when a list follows immediately */
.sec-h + .pub-list,
.sec-h + .media-list,
.sec-h + .pill-list { margin-top: .5rem; }

/* ===== Section heading bar (full-width gradient fill) ===== */

/* Fallbacks */
:root {
  --sec-grad-start: #eef5fb;        /* very light accent tint */
  --sec-grad-end:   #dbeaf9;        /* light accent tint */
}

/* Prefer computed tints from your accent */
@supports (background: color-mix(in srgb, white 90%, black)) {
  :root {
    /* Keep both ends light so dark text remains readable */
    --sec-grad-start: color-mix(in srgb, var(--accent) 8%,  white);
    --sec-grad-end:   color-mix(in srgb, var(--accent) 22%, white);
  }
}

/* Base: full content-width rectangle (no radius) */
.sec-h {
  display: block;                 /* span full content width */
  margin: 2rem 0 1rem;
  padding: .6rem .8rem;
  background: linear-gradient(90deg, var(--sec-grad-start), var(--sec-grad-end));
  border: 0;
  border-radius: 0;               /* sharp corners as requested */
  color: var(--fg);               /* dark text keeps contrast on light tints */
  box-shadow: 0 1px 0 rgba(0,0,0,.04);
}

/* Size variants if you want them */
.sec-h--sm { padding: .45rem .65rem; }
.sec-h--lg { padding: .75rem 1rem;   }

/* Tighten the gap to lists that follow */
.sec-h + .pub-list,
.sec-h + .media-list,
.sec-h + .pill-list { margin-top: .5rem; }

/* Optional: a stronger accent bar (white text) when you want extra emphasis) */
.sec-h--strong {
  /* darker end so white text reads well */
  background: linear-gradient(
    90deg,
    color-mix(in srgb, var(--accent) 22%, white),
    color-mix(in srgb, var(--accent) 70%, white)
  );
  color: #fff;
  text-shadow: 0 1px 0 rgba(0,0,0,.15); /* subtle readability boost */
}

/* ===== Diorama tile for 'Selected publications' ===== */

/* Fallback tints */
:root {
  --tile-bg: #fff;
  --tile-border: #e9eef5;
  --tile-shadow-1: 0 .5px 0 rgba(0,0,0,.03);
  --tile-shadow-2: 0 10px 24px -12px rgba(0,0,0,.20);
  --tile-accent-strip: #eaf3fc; /* very light accent tint */
}

/* Prefer computed tints when supported */
@supports (background: color-mix(in srgb, white 90%, black)) {
  :root {
    --tile-border: color-mix(in srgb, var(--accent) 18%, white);
    --tile-accent-strip: color-mix(in srgb, var(--accent) 10%, white);
  }
}

/* The plate */
.tile-plate {
  position: relative;
  margin: 1rem 0 1.25rem;
  padding: 1rem 1rem .9rem;
  background: var(--tile-bg);
  border: 1px solid var(--tile-border);
  border-radius: 12px;                   /* matches site’s rounded language */
  box-shadow: var(--tile-shadow-1), var(--tile-shadow-2);
  isolation: isolate;                    /* keeps the pseudo-shadow contained */
}

/* Subtle accent strip along the top edge */
.tile-plate::before {
  content: "";
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 6px;
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  background: linear-gradient(90deg,
                var(--tile-accent-strip),
                color-mix(in srgb, var(--accent) 24%, white));
}

/* Ground shadow for a diorama feel */
.tile-plate::after {
  content: "";
  position: absolute;
  left: 12px; right: 12px; bottom: -10px;
  height: 16px;
  z-index: -1;
  background: radial-gradient(50% 70% at 50% 50%,
              rgba(0,0,0,.18) 0%, rgba(0,0,0,0) 70%);
  filter: blur(4px);
  opacity: .7;
}

/* Title spacing inside the tile */
.tile-plate__title {
  margin: 0 0 .6rem 0;
  font-size: 1.05rem;
}

/* Gentle lift on hover/focus within */
.tile-plate:hover,
.tile-plate:focus-within {
  transform: translateY(-2px);
  box-shadow: 0 2px 0 rgba(0,0,0,.04), 0 14px 30px -12px rgba(0,0,0,.28);
}

@media (prefers-reduced-motion: reduce) {
  .tile-plate { transform: none !important; }
}

/* Tighter spacing to pill list */
.tile-plate .pill-list { margin-top: .4rem; }
